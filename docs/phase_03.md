# Phase 3: ì™„ì„± & ì—´ëŒ â€” ìƒì„¸ êµ¬í˜„ ê³„íš

## 1. ê°œìš”

### ëª©í‘œ
ìŠ¤í† ë¦¬ ì™„ì„± ë¡œì§ì„ í™•ì •í•˜ê³ , ì™„ì„±ëœ ë‹¨í¸ì„ ì—´ëŒí•  ìˆ˜ ìˆëŠ” ì•„ì¹´ì´ë¸Œ í˜ì´ì§€ì™€ ì‚¬ìš©ì í†µê³„ë¥¼ ë³´ì—¬ì£¼ëŠ” í”„ë¡œí•„ í˜ì´ì§€ë¥¼ êµ¬í˜„í•œë‹¤.

### Phase 3 ë²”ìœ„
- ìŠ¤í† ë¦¬ ì™„ì„± ë¡œì§ (ë§ˆì§€ë§‰ ë¼ìš´ë“œ ì¢…ë£Œ ì‹œ ìë™ ì™„ì„±)
- ì•„ì¹´ì´ë¸Œ í˜ì´ì§€ (ì™„ì„±ëœ ë‹¨í¸ ëª©ë¡ + ìƒì„¸ ì½ê¸°)
- í”„ë¡œí•„ í˜ì´ì§€ (í†µê³„ + ìµœê·¼ ì‘ì„± ê¸€)

### Phase 2 ì™„ë£Œ ìƒíƒœ
- âœ… ë¼ìš´ë“œ ìë™ ì§„í–‰ (Vercel Cron, ë§¤ì‹œê°„ ì •ê°)
- âœ… ê¸€ ì œì¶œ ê¸°ëŠ¥ (500ì ì œí•œ, ë¼ìš´ë“œë‹¹ ì—¬ëŸ¬ ê¸€ í—ˆìš©)
- âœ… íˆ¬í‘œ ê¸°ëŠ¥ (ì œì¶œë‹¹ 1íšŒ, ìê¸° ê¸€ íˆ¬í‘œ ë°©ì§€, ì·¨ì†Œ ê°€ëŠ¥)
- âœ… ë©”ì¸ í™”ë©´ (ìŠ¤í† ë¦¬ ì§„í–‰ ìƒí™© + ì œì¶œê¸€ + íˆ¬í‘œ + íƒ€ì´ë¨¸)
- âœ… ê¸€ì“°ê¸° í™”ë©´ (ì´ì „ ìŠ¤í† ë¦¬ + í¼)
- âœ… Server Actions (`submitStory`, `toggleVote`)
- âœ… Zustand ìŠ¤í† ì–´ (ë‚™ê´€ì  ì—…ë°ì´íŠ¸)

---

## 2. ì•„í‚¤í…ì²˜ ê²°ì • ì‚¬í•­

### 2.1 ì„œë²„ ì»´í¬ë„ŒíŠ¸ ì „ëµ

**ê²°ì •: Phase 3 í˜ì´ì§€ëŠ” ëª¨ë‘ Server Componentë¡œ êµ¬í˜„**

| í˜ì´ì§€ | êµ¬í˜„ ë°©ì‹ | ì´ìœ  |
|--------|----------|------|
| ì•„ì¹´ì´ë¸Œ ëª©ë¡ (`/archive`) | **Server Component** | ì •ì  ë°ì´í„° ëª©ë¡, í´ë¼ì´ì–¸íŠ¸ ì¸í„°ë™ì…˜ ì—†ìŒ |
| ì•„ì¹´ì´ë¸Œ ìƒì„¸ (`/archive/[id]`) | **Server Component** | ì½ê¸° ì „ìš© ì½˜í…ì¸ , SEO ìœ ë¦¬ |
| í”„ë¡œí•„ (`/profile`) | **Server Component** | ì¸ì¦ ì²´í¬ + DB ì¡°íšŒ, ë¦¬ë‹¤ì´ë ‰íŠ¸ ì²˜ë¦¬ |

**ì´ìœ :**
- ì•„ì¹´ì´ë¸Œì™€ í”„ë¡œí•„ì€ ì½ê¸° ì „ìš© í˜ì´ì§€ â†’ í´ë¼ì´ì–¸íŠ¸ ìƒíƒœ ê´€ë¦¬ ë¶ˆí•„ìš”
- SSRë¡œ ì´ˆê¸° ë¡œë”© ì†ë„ í–¥ìƒ
- `redirect()`, `notFound()` ë“± ì„œë²„ ì „ìš© í•¨ìˆ˜ í™œìš©

### 2.2 ë°ì´í„° ì¡°íšŒ íŒ¨í„´

**ê²°ì •: ë‹¤ë‹¨ê³„ ì¡°íšŒ í›„ Map ê¸°ë°˜ ë§¤í•‘**

Phase 2ì—ì„œ ë°œê²¬í•œ `profiles` ì§ì ‘ ì¡°ì¸ ë¶ˆê°€ ì´ìŠˆë¥¼ ë™ì¼í•˜ê²Œ ì ìš©:

```
1. rounds ì¡°íšŒ â†’ winning_submission_id ëª©ë¡ ì¶”ì¶œ
2. submissions ì¡°íšŒ (in: winning_submission_ids)
3. profiles ì¡°íšŒ (in: user_ids)
4. Mapìœ¼ë¡œ O(1) ë£©ì—…
```

ì´ íŒ¨í„´ì€ ì•„ì¹´ì´ë¸Œ ìƒì„¸ í˜ì´ì§€ì™€ í”„ë¡œí•„ í˜ì´ì§€ì—ì„œ ë™ì¼í•˜ê²Œ ì‚¬ìš©.

---

## 3. ìŠ¤í† ë¦¬ ì™„ì„± ë¡œì§

### 3.1 ì™„ì„± ì¡°ê±´

**`/api/cron/advance-round/route.ts` ë‚´ ë¶„ê¸° ë¡œì§:**

```
ë§¤ì‹œê°„ Cron ì‹¤í–‰
  â†’ active ë¼ìš´ë“œ ì¢…ë£Œ ì‹œê°„ ê²½ê³¼?
    â†’ ìµœë‹¤ ë“í‘œ ì œì¶œê¸€ â†’ winning_submission_id ì„¤ì •
    â†’ ë¼ìš´ë“œ status â†’ 'completed'
    â†’ round_number >= total_rounds ?
      â”œâ”€ YES â†’ ìŠ¤í† ë¦¬ status â†’ 'completed', completed_at ì„¤ì •
      â””â”€ NO  â†’ ë‹¤ìŒ ë¼ìš´ë“œ ìƒì„± (round_number + 1, +1ì‹œê°„)
```

### 3.2 ìŠ¤í† ë¦¬ ì™„ì„± ì²˜ë¦¬

```typescript
// ë§ˆì§€ë§‰ ë¼ìš´ë“œë©´ ìŠ¤í† ë¦¬ ì™„ì„±
if (activeRound.round_number >= story.total_rounds) {
  await supabase
    .from('stories')
    .update({
      status: 'completed',
      completed_at: new Date().toISOString(),
    })
    .eq('id', story.id);

  return NextResponse.json({
    message: 'Story completed',
    story_id: story.id,
  });
}
```

### 3.3 ì£¼ìš” ë™ì‘

- **winning_submission_id**: í•´ë‹¹ ë¼ìš´ë“œ ë‚´ `vote_count` ìµœê³  ì œì¶œê¸€. ì œì¶œê¸€ì´ ì—†ìœ¼ë©´ `null`.
- **completed_at**: ìŠ¤í† ë¦¬ ì™„ì„± ì‹œì  ê¸°ë¡ (ì•„ì¹´ì´ë¸Œ ì •ë ¬ ê¸°ì¤€)
- **ë‹¤ìŒ ë¼ìš´ë“œ ìƒì„±**: í˜„ì¬ ì‹œê° ê¸°ì¤€ `starts_at` + 1ì‹œê°„ í›„ `ends_at`

---

## 4. ì•„ì¹´ì´ë¸Œ í˜ì´ì§€

### 4.1 ì•„ì¹´ì´ë¸Œ ëª©ë¡ (`/archive`)

**ë°ì´í„° íë¦„:**
```
stories í…Œì´ë¸” â†’ status = 'completed' â†’ completed_at DESC ì •ë ¬
```

**UI êµ¬ì¡°:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì•„ì¹´ì´ë¸Œ                     â”‚  â† í˜ì´ì§€ ì œëª©
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ìŠ¤í† ë¦¬ ì œëª©     [ì¥ë¥´ ë±ƒì§€]â”‚ â”‚
â”‚ â”‚ 15ê°œ ë¼ìš´ë“œ Â· 2026ë…„ 2ì›” â”‚ â”‚  â† ìŠ¤í† ë¦¬ ì¹´ë“œ (í´ë¦­ â†’ ìƒì„¸)
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ìŠ¤í† ë¦¬ ì œëª©     [ì¥ë¥´ ë±ƒì§€]â”‚ â”‚
â”‚ â”‚ 24ê°œ ë¼ìš´ë“œ Â· 2026ë…„ 1ì›” â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ë¹ˆ ìƒíƒœ:** ì™„ì„±ëœ ìŠ¤í† ë¦¬ê°€ ì—†ìœ¼ë©´ ì±… ì•„ì´ì½˜ + ì•ˆë‚´ ë¬¸êµ¬ í‘œì‹œ.

**ì¹´ë“œ ìŠ¤íƒ€ì¼:**
- `bg-bg-surface border border-border rounded-lg p-4`
- í˜¸ë²„ ì‹œ `border-accent` ì „í™˜
- ì¥ë¥´ ë±ƒì§€: `bg-accent-light text-accent rounded-full`

### 4.2 ì•„ì¹´ì´ë¸Œ ìƒì„¸ (`/archive/[id]`)

**ë°ì´í„° íë¦„:**
```
1. stories â†’ idë¡œ ë‹¨ì¼ ì¡°íšŒ (ì—†ìœ¼ë©´ notFound())
2. rounds â†’ story_id + status='completed' + round_number ASC
3. submissions â†’ winning_submission_id ëª©ë¡ìœ¼ë¡œ in ì¡°íšŒ
4. profiles â†’ user_id ëª©ë¡ìœ¼ë¡œ in ì¡°íšŒ
5. Map ê¸°ë°˜ ë§¤í•‘ (submissionMap, profileMap)
```

**UI êµ¬ì¡°:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† ì•„ì¹´ì´ë¸Œ                   â”‚  â† ë’¤ë¡œê°€ê¸° ë§í¬
â”‚                              â”‚
â”‚ ìŠ¤í† ë¦¬ ì œëª©                   â”‚
â”‚ íŒíƒ€ì§€ Â· 15ê°œ ë¼ìš´ë“œ Â· 2026ë…„ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                          â”‚ â”‚
â”‚ â”‚  ì±„íƒê¸€ 1ë²ˆì§¸ ë¼ìš´ë“œ...    â”‚ â”‚  â† story-text í´ë˜ìŠ¤
â”‚ â”‚                 â€” ë‹‰ë„¤ì„  â”‚ â”‚     (line-height: 1.8)
â”‚ â”‚                          â”‚ â”‚
â”‚ â”‚  ì±„íƒê¸€ 2ë²ˆì§¸ ë¼ìš´ë“œ...    â”‚ â”‚
â”‚ â”‚                 â€” ë‹‰ë„¤ì„  â”‚ â”‚
â”‚ â”‚  ...                     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚
â”‚   3ëª…ì˜ ì‘ê°€ê°€ í•¨ê»˜ ë§Œë“  ì´ì•¼ê¸° â”‚  â† ì°¸ì—¬ ì‘ê°€ ìˆ˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**íŠ¹ì´ì‚¬í•­:**
- ë¼ìš´ë“œë³„ ì±„íƒê¸€ì„ ìˆœì„œëŒ€ë¡œ ì´ì–´ ë¶™ì—¬ í•˜ë‚˜ì˜ ë‹¨í¸ì²˜ëŸ¼ ì½íˆë„ë¡ êµ¬ì„±
- ê° ì±„íƒê¸€ í•˜ë‹¨ ìš°ì¸¡ì— ì‘ì„±ì ë‹‰ë„¤ì„ í‘œì‹œ (`â€” ë‹‰ë„¤ì„`)
- ì±„íƒê¸€ì´ ì—†ëŠ” ë¼ìš´ë“œëŠ” `(ì±„íƒëœ ê¸€ ì—†ìŒ)` í‘œì‹œ
- ì°¸ì—¬ ì‘ê°€ ìˆ˜ëŠ” `Set`ìœ¼ë¡œ ì¤‘ë³µ ì œê±°í•œ ê³ ìœ  `user_id` ì¹´ìš´íŠ¸

---

## 5. í”„ë¡œí•„ í˜ì´ì§€

### 5.1 ì¸ì¦ ë° ë°ì´í„° íë¦„

```
1. auth.getUser() â†’ ë¯¸ì¸ì¦ ì‹œ /login ë¦¬ë‹¤ì´ë ‰íŠ¸
2. profiles â†’ user.idë¡œ ë‹¨ì¼ ì¡°íšŒ
3. submissions â†’ user_idë¡œ count (ì‘ì„±í•œ ê¸€ ìˆ˜)
4. submissions â†’ user_idë¡œ id ëª©ë¡ ì¡°íšŒ
   â†’ rounds â†’ winning_submission_id IN (id ëª©ë¡) count (ì±„íƒëœ ê¸€ ìˆ˜)
5. submissions â†’ user_id, created_at DESC, limit 10 (ìµœê·¼ ì‘ì„± ê¸€)
```

### 5.2 í”„ë¡œí•„ ì •ë³´ í´ë°± ì²´ì¸

```typescript
// ë‹‰ë„¤ì„: DB í”„ë¡œí•„ â†’ OAuth name â†’ OAuth full_name â†’ ê¸°ë³¸ê°’
const nickname =
  profile?.nickname ??
  user.user_metadata?.name ??
  user.user_metadata?.full_name ??
  'ì‚¬ìš©ì';

// ì•„ë°”íƒ€: DB í”„ë¡œí•„ â†’ OAuth avatar_url â†’ OAuth picture
const avatarUrl =
  profile?.avatar_url ??
  user.user_metadata?.avatar_url ??
  user.user_metadata?.picture;
```

### 5.3 í†µê³„ ê³„ì‚°

| í†µê³„ | ì¿¼ë¦¬ | ì„¤ëª… |
|------|------|------|
| ì‘ì„±í•œ ê¸€ | `submissions.count WHERE user_id = me` | ì „ì²´ ì œì¶œê¸€ ìˆ˜ |
| ì±„íƒëœ ê¸€ | `rounds.count WHERE winning_submission_id IN (ë‚´ submission ids)` | ë‚´ ê¸€ì´ ì±„íƒëœ ë¼ìš´ë“œ ìˆ˜ |

### 5.4 UI êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        â”Œâ”€â”€â”€â”€â”               â”‚
â”‚        â”‚ ğŸ§‘ â”‚               â”‚  â† ì•„ë°”íƒ€ (80px, ì´ë¯¸ì§€ ë˜ëŠ” í”Œë ˆì´ìŠ¤í™€ë”)
â”‚        â””â”€â”€â”€â”€â”˜               â”‚
â”‚      ë‹‰ë„¤ì„                  â”‚
â”‚    user@email.com           â”‚
â”‚                              â”‚
â”‚    ì‘ì„±í•œ ê¸€    ì±„íƒëœ ê¸€      â”‚
â”‚       12          3          â”‚  â† í†µê³„
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ìµœê·¼ ì‘ì„±í•œ ê¸€               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ì œì¶œ ë‚´ìš© (2ì¤„ ì œí•œ)...   â”‚ â”‚
â”‚ â”‚ â¤ï¸ 5   2ì›” 15ì¼ 14:30    â”‚ â”‚  â† ìµœê·¼ ì œì¶œê¸€ ì¹´ë“œ
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ì œì¶œ ë‚´ìš© (2ì¤„ ì œí•œ)...   â”‚ â”‚
â”‚ â”‚ â¤ï¸ 3   2ì›” 14ì¼ 20:15    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       [ ë¡œê·¸ì•„ì›ƒ ]           â”‚  â† SignOutButton ì»´í¬ë„ŒíŠ¸
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ìµœê·¼ ì œì¶œê¸€ ì¹´ë“œ:**
- ë‚´ìš©: `line-clamp-2`ë¡œ 2ì¤„ ì œí•œ
- ë©”íƒ€: íˆ¬í‘œ ìˆ˜ (â¤ï¸) + ì‘ì„± ë‚ ì§œ (í•œêµ­ì–´ ë¡œì¼€ì¼, `month: 'short'`, `day: 'numeric'`, ì‹œ:ë¶„)

---

## 6. DB ë³€ê²½ ì‚¬í•­

### 6.1 ë§ˆì´ê·¸ë ˆì´ì…˜: `003_add_seed_text.sql`

```sql
-- ìŠ¤í† ë¦¬ì˜ ì²« ë²ˆì§¸ ì œì‹œê¸€ì„ ì €ì¥í•˜ê¸° ìœ„í•œ seed_text ì»¬ëŸ¼ ì¶”ê°€
ALTER TABLE public.stories ADD COLUMN seed_text TEXT;

COMMENT ON COLUMN public.stories.seed_text IS 'ìŠ¤í† ë¦¬ì˜ ì²« ë²ˆì§¸ ì œì‹œê¸€. ì°¸ì—¬ìë“¤ì´ ì´ ê¸€ì„ ì½ê³  ì´ì–´ì„œ ì‘ì„±í•œë‹¤.';
```

**ëª©ì :** ë¦´ë ˆì´ ì†Œì„¤ì˜ ì‹œì‘ì ì´ ë˜ëŠ” ì œì‹œê¸€ì„ ì €ì¥. Round 1 ì°¸ì—¬ìë“¤ì€ ì´ ê¸€ì„ ì½ê³  ì´ì–´ì„œ ì‘ì„±í•œë‹¤.

### 6.2 íƒ€ì… ë³€ê²½: `src/types/database.ts`

```typescript
export interface Story {
  // ... ê¸°ì¡´ í•„ë“œ
  seed_text: string | null;  // ì¶”ê°€
}
```

---

## 7. ë””ë ‰í† ë¦¬ êµ¬ì¡° (Phase 3 ì™„ë£Œ í›„)

```
src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”œâ”€â”€ page.tsx
â”‚   â”œâ”€â”€ globals.css
â”‚   â”œâ”€â”€ write/
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”œâ”€â”€ archive/
â”‚   â”‚   â”œâ”€â”€ page.tsx                      # ì•„ì¹´ì´ë¸Œ ëª©ë¡ (ì™„ì„±ëœ ìŠ¤í† ë¦¬)
â”‚   â”‚   â””â”€â”€ [id]/
â”‚   â”‚       â””â”€â”€ page.tsx                  # ì•„ì¹´ì´ë¸Œ ìƒì„¸ (ì‹ ê·œ)
â”‚   â”œâ”€â”€ profile/
â”‚   â”‚   â””â”€â”€ page.tsx                      # í”„ë¡œí•„ (ì¬êµ¬í˜„)
â”‚   â”œâ”€â”€ login/
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ callback/route.ts
â”‚   â”‚   â””â”€â”€ signout/route.ts
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ cron/
â”‚           â””â”€â”€ advance-round/
â”‚               â””â”€â”€ route.ts              # ìŠ¤í† ë¦¬ ì™„ì„± ë¡œì§ í¬í•¨
â”œâ”€â”€ actions/
â”‚   â”œâ”€â”€ submission.ts
â”‚   â””â”€â”€ vote.ts
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/
â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”œâ”€â”€ Card.tsx
â”‚   â”‚   â””â”€â”€ Badge.tsx
â”‚   â”œâ”€â”€ story/
â”‚   â”‚   â”œâ”€â”€ SubmissionCard.tsx
â”‚   â”‚   â”œâ”€â”€ SubmissionList.tsx
â”‚   â”‚   â”œâ”€â”€ StoryProgress.tsx
â”‚   â”‚   â”œâ”€â”€ Timer.tsx
â”‚   â”‚   â”œâ”€â”€ WriteForm.tsx
â”‚   â”‚   â””â”€â”€ RoundInfo.tsx
â”‚   â”œâ”€â”€ layout/
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â””â”€â”€ SignOutButton.tsx
â”‚   â””â”€â”€ providers/
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ supabase/
â”œâ”€â”€ stores/
â”‚   â””â”€â”€ roundStore.ts
â”œâ”€â”€ types/
â”‚   â””â”€â”€ database.ts                       # seed_text ì¶”ê°€
supabase/
â”œâ”€â”€ migrations/
â”‚   â”œâ”€â”€ 001_initial_schema.sql
â”‚   â”œâ”€â”€ 002_vote_count_functions.sql
â”‚   â””â”€â”€ 003_add_seed_text.sql             # (ì‹ ê·œ)
```

---

## 8. êµ¬í˜„ ìˆœì„œ & ì²´í¬ë¦¬ìŠ¤íŠ¸

### Step 1: DB ë§ˆì´ê·¸ë ˆì´ì…˜ âœ… ì™„ë£Œ

- [x] `003_add_seed_text.sql` ì‘ì„± (stories í…Œì´ë¸”ì— seed_text ì»¬ëŸ¼ ì¶”ê°€)
- [x] Supabase ëŒ€ì‹œë³´ë“œì—ì„œ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
- [x] `src/types/database.ts` â€” Story ì¸í„°í˜ì´ìŠ¤ì— `seed_text: string | null` ì¶”ê°€

### Step 2: ìŠ¤í† ë¦¬ ì™„ì„± ë¡œì§ âœ… ì™„ë£Œ

- [x] `/api/cron/advance-round/route.ts` â€” ë§ˆì§€ë§‰ ë¼ìš´ë“œ ì¢…ë£Œ ì‹œ ìŠ¤í† ë¦¬ ì™„ì„± ì²˜ë¦¬
- [x] `stories.status = 'completed'` + `completed_at` ì„¤ì •
- [x] ë§ˆì§€ë§‰ ë¼ìš´ë“œê°€ ì•„ë‹ˆë©´ ë‹¤ìŒ ë¼ìš´ë“œ ìë™ ìƒì„± (+1ì‹œê°„)

### Step 3: ì•„ì¹´ì´ë¸Œ ëª©ë¡ í˜ì´ì§€ âœ… ì™„ë£Œ

- [x] `/archive/page.tsx` â€” ì™„ì„±ëœ ìŠ¤í† ë¦¬ ëª©ë¡ (completed_at DESC)
- [x] ìŠ¤í† ë¦¬ ì¹´ë“œ UI (ì œëª© + ì¥ë¥´ ë±ƒì§€ + ë¼ìš´ë“œ ìˆ˜ + ì™„ì„±ì¼)
- [x] ë¹ˆ ìƒíƒœ ì²˜ë¦¬ (ì•„ì§ ì™„ì„±ëœ ìŠ¤í† ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤)
- [x] ì¹´ë“œ í´ë¦­ â†’ `/archive/[id]`ë¡œ ì´ë™

### Step 4: ì•„ì¹´ì´ë¸Œ ìƒì„¸ í˜ì´ì§€ âœ… ì™„ë£Œ

- [x] `/archive/[id]/page.tsx` â€” ì™„ì„±ëœ ìŠ¤í† ë¦¬ ì „ì²´ ì½ê¸°
- [x] ë’¤ë¡œê°€ê¸° ë§í¬ (â† ì•„ì¹´ì´ë¸Œ)
- [x] ìŠ¤í† ë¦¬ ë©”íƒ€ ì •ë³´ (ì œëª©, ì¥ë¥´, ë¼ìš´ë“œ ìˆ˜, ì™„ì„±ì¼)
- [x] ë¼ìš´ë“œë³„ ì±„íƒê¸€ ìˆœì„œëŒ€ë¡œ í‘œì‹œ (story-text ìŠ¤íƒ€ì¼)
- [x] ì±„íƒê¸€ ì‘ì„±ì ë‹‰ë„¤ì„ í‘œì‹œ (`â€” ë‹‰ë„¤ì„`)
- [x] ì°¸ì—¬ ì‘ê°€ ìˆ˜ í‘œì‹œ (ì¤‘ë³µ ì œê±°)
- [x] ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ìŠ¤í† ë¦¬ â†’ `notFound()` ì²˜ë¦¬

### Step 5: í”„ë¡œí•„ í˜ì´ì§€ âœ… ì™„ë£Œ

- [x] `/profile/page.tsx` â€” ì‚¬ìš©ì í”„ë¡œí•„ + í†µê³„
- [x] ë¯¸ì¸ì¦ ì‹œ `/login` ë¦¬ë‹¤ì´ë ‰íŠ¸
- [x] ì•„ë°”íƒ€ í‘œì‹œ (ì´ë¯¸ì§€ ë˜ëŠ” SVG í”Œë ˆì´ìŠ¤í™€ë”)
- [x] ë‹‰ë„¤ì„/ì´ë©”ì¼ í‘œì‹œ (í´ë°± ì²´ì¸ ì ìš©)
- [x] í†µê³„: ì‘ì„±í•œ ê¸€ ìˆ˜ / ì±„íƒëœ ê¸€ ìˆ˜
- [x] ìµœê·¼ ì‘ì„±í•œ ê¸€ ëª©ë¡ (ìµœëŒ€ 10ê°œ, 2ì¤„ ì œí•œ)
- [x] SignOutButton ì»´í¬ë„ŒíŠ¸ í†µí•©
- [x] í•œêµ­ì–´ ë‚ ì§œ í¬ë§· ì ìš©

### Step 6: ê²€ì¦ âœ… ì™„ë£Œ

- [x] `npm run build` ë¹Œë“œ ì„±ê³µ
- [x] ì•„ì¹´ì´ë¸Œ ëª©ë¡ í˜ì´ì§€ ì •ìƒ í‘œì‹œ
- [x] ì•„ì¹´ì´ë¸Œ ìƒì„¸ í˜ì´ì§€ â€” ì±„íƒê¸€ ìˆœì„œëŒ€ë¡œ ë Œë”ë§
- [x] í”„ë¡œí•„ í˜ì´ì§€ â€” í†µê³„ ì •í™•ì„± í™•ì¸
- [x] ë¯¸ì¸ì¦ ì‹œ í”„ë¡œí•„ â†’ ë¡œê·¸ì¸ ë¦¬ë‹¤ì´ë ‰íŠ¸ í™•ì¸
- [x] ëª¨ë°”ì¼/ë°ìŠ¤í¬íƒ‘ ë°˜ì‘í˜• í™•ì¸
- [x] ë‹¤í¬ëª¨ë“œ/ë¼ì´íŠ¸ëª¨ë“œ ì „í™˜ í™•ì¸

---

## Phase 3 ì™„ë£Œ (2026-02-15)

### êµ¬í˜„ ì¤‘ ë³€ê²½ ì‚¬í•­ ìš”ì•½

1. **seed_text ì»¬ëŸ¼ ì¶”ê°€**: ìŠ¤í† ë¦¬ì˜ ì‹œì‘ ì œì‹œê¸€ì„ DBì— ì €ì¥í•  ìˆ˜ ìˆë„ë¡ `stories` í…Œì´ë¸”ì— `seed_text TEXT` ì»¬ëŸ¼ ì¶”ê°€. Phase 2ì—ì„œëŠ” ìŠ¤í† ë¦¬ ì‹œì‘ì ì´ ëª…í™•í•˜ì§€ ì•Šì•˜ìœ¼ë‚˜, í™ˆ í™”ë©´ì—ì„œ ì œì‹œê¸€ì„ í‘œì‹œí•˜ê¸° ìœ„í•´ í•„ìš”.
2. **ì•„ì¹´ì´ë¸Œ ìƒì„¸ ë‹¤ë‹¨ê³„ ì¡°íšŒ**: Supabase PostgRESTì˜ FK ì¡°ì¸ ì œí•œìœ¼ë¡œ ì¸í•´, rounds â†’ submissions â†’ profiles ë¥¼ 3ë‹¨ê³„ë¡œ ë‚˜ëˆ„ì–´ ì¡°íšŒí•˜ê³  Mapìœ¼ë¡œ ë§¤í•‘í•˜ëŠ” íŒ¨í„´ ì ìš© (Phase 2 ë©”ì¸ í˜ì´ì§€ì™€ ë™ì¼í•œ íŒ¨í„´).
3. **í”„ë¡œí•„ ì±„íƒ íšŸìˆ˜ 2ë‹¨ê³„ ê³„ì‚°**: ë‹¨ì¼ ì¿¼ë¦¬ë¡œ ì±„íƒ íšŸìˆ˜ë¥¼ êµ¬í•  ìˆ˜ ì—†ì–´, â‘  ë‚´ submission_id ëª©ë¡ ì¡°íšŒ â†’ â‘¡ rounds.winning_submission_id IN ì¡°íšŒ ë°©ì‹ìœ¼ë¡œ ë¶„ë¦¬.
